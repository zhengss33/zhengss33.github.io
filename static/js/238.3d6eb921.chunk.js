"use strict";(self.webpackChunktask_manager=self.webpackChunktask_manager||[]).push([[238],{6571:function(e,n,t){t.d(n,{r:function(){return h}});var r,i,a,o,c,s,l,d,u=t(2791),f=["title","titleId"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(this,arguments)}function m(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function x(e,n){var t=e.title,x=e.titleId,h=m(e,f);return u.createElement("svg",p({id:"\\u56FE\\u5C42_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 154.8 31.7",style:{enableBackground:"new 0 0 154.8 31.7"},xmlSpace:"preserve",ref:n,"aria-labelledby":x},h),r||(r=u.createElement("style",{type:"text/css"},"\n\t.st0{fill:url(#SVGID_1_);}\n\t.st1{fill:url(#SVGID_2_);}\n\t.st2{fill:url(#SVGID_3_);}\n\t.st3{fill:url(#SVGID_4_);}\n\t.st4{fill:url(#SVGID_5_);}\n\t.st5{fill:url(#SVGID_6_);}\n\t.st6{fill:#494949;}\n")),void 0===t?u.createElement("title",{id:x},"\u753b\u677f 42 \u526f\u672c 14"):t?u.createElement("title",{id:x},t):null,u.createElement("g",null,u.createElement("g",null,u.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:920.0957,y1:1103.4659,x2:929.8296,y2:1096.1986,gradientTransform:"matrix(0.7071 0.7071 0.7071 -0.7071 -1425.9574 140.9854)"},u.createElement("stop",{offset:.32,style:{stopColor:"#1369C8"}}),u.createElement("stop",{offset:1,style:{stopColor:"#45A2FF"}})),i||(i=u.createElement("path",{className:"st0",d:"M3.2,8.7l6,6c2.4,2.4,2.4,6.2,0,8.6l0,0l0,0l-7.9-7.9c-1.4-1.4-1.4-3.6,0-5l1.7-1.7C3,8.6,3.1,8.6,3.2,8.7 C3.2,8.7,3.2,8.7,3.2,8.7z"})),u.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:5.0491,y1:421.478,x2:2.4372,y2:417.3381,gradientTransform:"matrix(1 0 0 -1 0 433.8698)"},u.createElement("stop",{offset:0,style:{stopColor:"#5FABF5"}}),u.createElement("stop",{offset:.75,style:{stopColor:"#77CBFF"}}),u.createElement("stop",{offset:.99,style:{stopColor:"#5EBDFF"}})),a||(a=u.createElement("path",{className:"st1",d:"M3.7,8.4L3.7,8.4l-2.4,2.4c-0.1,0.1-0.1,0.1-0.2,0.2c-1.2,1.2-1.2,3.1,0,4.3l4.3,4.3 c-1.2-1.2-1.2-3.2-0.2-4.3l2.2-2.4l0,0"})),u.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:10.7948,y1:437.7884,x2:4.2703,y2:416.9196,gradientTransform:"matrix(1 0 0 -1 0 433.8698)"},u.createElement("stop",{offset:.04,style:{stopColor:"#226DBD"}}),u.createElement("stop",{offset:.9,style:{stopColor:"#56ABFB"}})),o||(o=u.createElement("path",{className:"st2",d:"M12,0.3L11.7,0c0,0-0.1,0-0.1,0c0,0,0,0,0,0L3.4,8.2l0,0l-2.4,2.4C1,10.6,1,10.7,0.9,10.7 c-1.2,1.2-1.2,3.1,0,4.3l4.3,4.3c-1.2-1.2-1.2-3.1,0-4.3c0,0,0,0,0,0l2.2-2.2l0,0l3.7-3.7l0,0L12,8.3C14.2,6.1,14.2,2.5,12,0.3z"})),u.createElement("linearGradient",{id:"SVGID_4_",gradientUnits:"userSpaceOnUse",x1:-7999.1392,y1:-2121.6531,x2:-7989.4053,y2:-2128.9204,gradientTransform:"matrix(-0.7071 -0.7071 -0.7071 0.7071 -7134.4897 -4135.6255)"},u.createElement("stop",{offset:.32,style:{stopColor:"#1369C8"}}),u.createElement("stop",{offset:1,style:{stopColor:"#45A2FF"}})),c||(c=u.createElement("path",{className:"st3",d:"M23.7,23l-6-6c-2.4-2.4-2.4-6.2,0-8.6v0l0,0l0,0l7.9,7.9c1.4,1.4,1.4,3.6,0,5L24,23 C23.9,23.1,23.8,23.1,23.7,23L23.7,23z"})),u.createElement("linearGradient",{id:"SVGID_5_",gradientUnits:"userSpaceOnUse",x1:-8582.291,y1:4447.8301,x2:-8584.9033,y2:4443.6875,gradientTransform:"matrix(-1 0 0 1 -8560.4375 -4428.5098)"},u.createElement("stop",{offset:0,style:{stopColor:"#5FABF5"}}),u.createElement("stop",{offset:.75,style:{stopColor:"#77CBFF"}}),u.createElement("stop",{offset:.99,style:{stopColor:"#5EBDFF"}})),s||(s=u.createElement("path",{className:"st4",d:"M23.2,23.3L23.2,23.3l2.4-2.4c0.1-0.1,0.1-0.1,0.2-0.2c1.2-1.2,1.2-3.1,0-4.3c0,0,0,0,0,0l-4.3-4.3 c1.2,1.2,1.2,3.2,0.2,4.3l-2.2,2.4l0,0"})),u.createElement("linearGradient",{id:"SVGID_6_",gradientUnits:"userSpaceOnUse",x1:-8576.5439,y1:4464.1367,x2:-8583.0713,y2:4443.2681,gradientTransform:"matrix(-1 0 0 1 -8560.4375 -4428.5098)"},u.createElement("stop",{offset:.04,style:{stopColor:"#226DBD"}}),u.createElement("stop",{offset:.9,style:{stopColor:"#56ABFB"}})),l||(l=u.createElement("path",{className:"st5",d:"M14.9,31.4l0.3,0.3c0,0,0.1,0,0.1,0l8.2-8.2l0,0l2.4-2.4c0.1-0.1,0.1-0.1,0.2-0.2c1.2-1.2,1.2-3.1,0-4.3 l-4.3-4.3c1.2,1.2,1.2,3.1,0,4.3l-2.2,2.2l0,0l-3.7,3.7l0,0l-0.9,0.9C12.7,25.6,12.7,29.2,14.9,31.4 C14.9,31.4,14.9,31.4,14.9,31.4z"}))),d||(d=u.createElement("g",null,u.createElement("path",{className:"st6",d:"M35.4,6.2h7.3c1.1,0,2.2,0.2,3.2,0.8c0.9,0.5,1.7,1.2,2.3,2.1c1.1,1.9,1.1,4.2,0,6.1 c-0.6,0.9-1.4,1.6-2.3,2.1c-1,0.5-2.1,0.8-3.2,0.8h-4.3v7.5h-3V6.2z M42.8,15.2c0.6,0,1.2-0.1,1.7-0.4c1.4-0.8,1.9-2.6,1.1-4.1 c-0.3-0.5-0.6-0.9-1.1-1.1c-0.5-0.3-1.1-0.4-1.7-0.4h-4.3v6.1H42.8z"}),u.createElement("path",{className:"st6",d:"M51.2,9.6c-0.8-0.8-0.8-2.1,0-2.9c0.8-0.8,2.1-0.8,2.9,0c0.8,0.8,0.8,2.1,0,2.9c-0.4,0.4-0.9,0.6-1.4,0.6 C52.1,10.2,51.6,10,51.2,9.6z"}),u.createElement("rect",{x:51.2,y:11.8,className:"st6",width:3,height:13.8}),u.createElement("path",{className:"st6",d:"M57.8,11.6h2.9v1.9h0.1c0.4-0.7,1.1-1.3,1.8-1.6c0.8-0.4,1.6-0.7,2.5-0.7c1.7,0,3,0.5,3.9,1.5 c0.9,1,1.3,2.4,1.3,4.1v8.9h-3v-8.5c0-1.1-0.3-1.9-0.8-2.4C66,14.2,65.2,14,64.3,14c-0.6,0-1.3,0.2-1.8,0.6 c-0.5,0.4-1,0.9-1.2,1.5c-0.3,0.6-0.4,1.3-0.4,2v7.6h-3V11.6z"}),u.createElement("path",{className:"st6",d:"M75.4,30.5c-1-0.7-1.8-1.6-2.2-2.8h3.5c0.2,0.2,0.4,0.4,0.7,0.6c0.7,0.4,1.5,0.7,2.3,0.7c1.3,0,2.3-0.4,3-1.1 c0.7-0.8,1.1-1.8,1.1-3.2v-1.3h-0.2c-0.5,0.7-1.1,1.2-1.8,1.5c-0.8,0.4-1.7,0.6-2.6,0.6c-1.1,0-2.3-0.3-3.2-0.9 c-1-0.6-1.8-1.5-2.4-2.5c-0.6-1.2-0.9-2.5-0.9-3.8c0-1.3,0.3-2.6,0.9-3.8c0.5-1.1,1.4-1.9,2.4-2.6c1-0.6,2.1-0.9,3.2-0.9 c0.9,0,1.8,0.2,2.6,0.6c0.7,0.4,1.4,0.9,1.8,1.5h0.2v-1.7h2.8v13.1c0,1.3-0.3,2.7-0.9,3.8c-0.5,1-1.4,1.9-2.4,2.4 c-1.1,0.6-2.4,0.8-3.6,0.8C77.9,31.7,76.5,31.3,75.4,30.5z M81.7,22.3c0.6-0.4,1.1-0.9,1.5-1.5c0.4-0.7,0.6-1.6,0.5-2.4 c0-1.4-0.4-2.5-1.2-3.3c-0.7-0.8-1.8-1.2-2.9-1.2c-0.7,0-1.4,0.2-2,0.5c-0.6,0.4-1.1,0.9-1.5,1.5c-0.7,1.5-0.7,3.3,0,4.8 c0.3,0.6,0.8,1.2,1.5,1.5c0.6,0.4,1.3,0.5,2,0.5C80.3,22.8,81,22.7,81.7,22.3z"}),u.createElement("path",{className:"st6",d:"M128.4,24.7c-1-0.6-1.8-1.5-2.4-2.6c-1.2-2.3-1.2-5.1,0-7.4c0.6-1.1,1.4-1.9,2.4-2.6c1-0.6,2.2-0.9,3.4-0.9 c0.9,0,1.8,0.2,2.6,0.6c0.7,0.4,1.3,0.9,1.8,1.6l0,0V6.2h3v19.4h-2.8v-2.2h-0.1c-0.5,0.7-1.1,1.2-1.8,1.5 c-0.8,0.4-1.7,0.7-2.6,0.6C130.6,25.6,129.4,25.3,128.4,24.7z M134.2,22.4c0.6-0.4,1.2-0.9,1.5-1.6c0.4-0.7,0.6-1.5,0.6-2.4 c0-0.8-0.2-1.6-0.6-2.3c-0.3-0.7-0.9-1.2-1.5-1.6c-0.6-0.4-1.3-0.6-2-0.6c-0.7,0-1.4,0.2-2,0.6c-0.6,0.4-1.2,0.9-1.5,1.6 c-0.4,0.7-0.6,1.5-0.6,2.3c0,0.8,0.2,1.6,0.6,2.4c0.4,0.7,0.9,1.2,1.5,1.6c0.6,0.4,1.3,0.6,2,0.6 C132.9,22.9,133.6,22.7,134.2,22.4z"}),u.createElement("path",{className:"st6",d:"M116.4,11.1c-4,0-7.3,3.2-7.3,7.2c0,4,3.2,7.3,7.2,7.3c0.9,0,1.8-0.1,2.6-0.5l4.3-4.3 c1.4-3.7-0.5-7.8-4.2-9.2C118.2,11.3,117.3,11.1,116.4,11.1z M120.6,19.2l-3.3,3.3c-0.3,0.1-0.6,0.1-0.8,0.1 c-2.3,0-4.2-1.9-4.2-4.2s1.9-4.2,4.2-4.2s4.2,1.9,4.2,4.2C120.7,18.6,120.6,18.9,120.6,19.2z"}),u.createElement("path",{className:"st6",d:"M98.8,6.2c4,0,7.4,2,8.8,5.7h-3.7c-1-2-2.8-3-5.1-3c-3.8,0-6.5,2.7-6.5,7s2.7,7,6.5,7c2.3,0,4.1-1,5.1-3h3.7 c-1.4,3.7-4.9,5.7-8.8,5.7c-5.4,0-9.7-4-9.7-9.7S93.5,6.2,98.8,6.2z"}),u.createElement("path",{className:"st6",d:"M144.7,24.7c-1.1-0.6-1.9-1.5-2.5-2.6c-0.6-1.1-0.9-2.4-0.9-3.7c0-1.3,0.3-2.5,0.9-3.6c0.6-1.1,1.4-2,2.4-2.6 c1.1-0.7,2.3-1,3.5-1c1.2,0,2.5,0.3,3.6,0.9c1,0.6,1.8,1.5,2.3,2.5c0.5,1.1,0.8,2.3,0.8,3.6c0,0.4,0,0.8,0,1.2h-10.5 c0,1,0.5,2,1.3,2.6c0.8,0.7,1.7,1,2.8,1c0.7,0,1.3-0.2,1.9-0.6c0.6-0.4,1.1-0.9,1.5-1.6h3c-0.2,0.5-0.3,0.9-0.6,1.3 c-0.6,1-1.4,1.9-2.4,2.5c-1,0.7-2.2,1-3.4,1C147,25.6,145.8,25.3,144.7,24.7z M151.8,16.8c0-0.5-0.2-1-0.5-1.4 c-0.3-0.5-0.7-0.9-1.2-1.2c-0.6-0.3-1.3-0.5-2-0.5c-0.9,0-1.7,0.3-2.4,0.8c-0.7,0.6-1.1,1.4-1.4,2.3H151.8z"})))))}var h=u.forwardRef(x);n.Z=t.p+"static/media/logo.04b4c3aadd5f5fd0247d505264a96daa.svg"},1238:function(e,n,t){t.r(n),t.d(n,{default:function(){return rt}});var r,i,a,o,c,s,l,d,u,f,p,m,x,h,v,Z,j,y,g,k,b,I,C=t(168),E=t(9958),w=t(9042),T=t(9439),O=t(1413),M=t(5987),F=t(6896),N=t(6574),S=t(7382),D=t(6090),z=t(7892),_=t.n(z),P=t(3504),L=t(7561),V=t(184),G=["checked","onCheckedChange"],U=function(e){var n=e.checked,t=e.onCheckedChange,r=(0,M.Z)(e,G);return(0,V.jsx)(L.Z,(0,O.Z)({count:1,value:n?1:0,onChange:function(e){return null===t||void 0===t?void 0:t(!!e)}},r))},A=t(286),B=t(1933),Q=t(3433),Y=t(4165),R=t(5861),H=function(e){var n=e.fromId,t=e.type,r=e.referenceId,i=e.list,a=(0,Q.Z)(i),o=a.findIndex((function(e){return e.id===n}));if(!r)return q((0,Q.Z)(a),o,a.length-1);var c=a.findIndex((function(e){return e.id===r}));return("after"===t?q:W)((0,Q.Z)(a),o,c)},W=function(e,n,t){var r=e[t],i=e.splice(n,1)[0],a=e.indexOf(r);return e.splice(a,0,i),e},q=function(e,n,t){var r=e[t],i=e.splice(n,1)[0],a=e.indexOf(r);return e.splice(a+1,0,i),e},K=function(e,n){var t=(0,B.useQueryClient)();return{onMutate:function(){var r=(0,R.Z)((0,Y.Z)().mark((function r(i){var a;return(0,Y.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.cancelQueries(e);case 2:return a=t.getQueryData(e),t.setQueryData(e,(function(e){return n(i,e)})),r.abrupt("return",{previousItems:a});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),onError:function(n,r,i){null!==i&&void 0!==i&&i.previousItems&&t.setQueryData(e,i.previousItems)},onSettled:function(){t.invalidateQueries(e)}}},X=function(e){return K(e,(function(e,n){return(null===n||void 0===n?void 0:n.filter((function(n){return n.id!==e.id})))||[]}))},J=function(e){return K(e,(function(e,n){return(null===n||void 0===n?void 0:n.map((function(n){return n.id===e.id?(0,O.Z)((0,O.Z)({},n),e):n})))||[]}))},$=function(e){return K(e,(function(e,n){return n?[].concat((0,Q.Z)(n),[e]):[]}))},ee=function(e){var n=(0,A.i)();return(0,B.useQuery)(["projects",e],(function(){return n("projects",{data:e})}))},ne=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("projects/".concat(e.id),{method:"PATCH",data:e})}),J(e))},te=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("projects",{method:"POST",data:e})}),$(e))},re=function(e){var n=(0,A.i)();return(0,B.useQuery)(["project",e],(function(){return n("projects/".concat(e))}),{enabled:!!e})},ie=t(5728),ae=t(2791),oe=function(e){if(!e)return{};var n=(0,O.Z)({},e);return Object.keys(n).forEach((function(e){(function(e){return void 0===e||null===e||""===e})(n[e])&&delete n[e]})),n},ce=function(){return window.location.href=window.location.origin},se=t(4942),le=function(e){var n=(0,P.lr)(),t=(0,T.Z)(n,2),r=t[0],i=t[1];return[(0,ae.useMemo)((function(){return e.reduce((function(e,n){return r.has(n)?(0,O.Z)((0,O.Z)({},e),(0,se.Z)({},n,r.get(n))):e}),{})}),[r]),function(e){var n=oe((0,O.Z)((0,O.Z)({},Object.fromEntries(r)),e));i(n)}]},de=function(){var e=le(["name","personId"]),n=(0,T.Z)(e,2),t=n[0],r=n[1];return[(0,ae.useMemo)((function(){return oe((0,O.Z)((0,O.Z)({},t),{},{personId:Number(t.personId)||void 0}))}),[t]),r]},ue=function(){var e=de();return["projects",(0,T.Z)(e,1)[0]]},fe=function(){var e=le(["isCreate","id"]),n=(0,T.Z)(e,2),t=n[0],r=n[1],i=re(Number(t.id)),a=i.data,o=i.isFetching;return{projectModelOpen:"true"===t.isCreate||!!t.id,open:function(){return r((0,O.Z)((0,O.Z)({},t),{},{isCreate:!0}))},close:function(){return r((0,O.Z)((0,O.Z)({},t),{},{isCreate:void 0,id:void 0}))},startEdit:function(e){return r((0,O.Z)((0,O.Z)({},t),{},{id:e}))},editingProjectData:a,isFetching:o}},pe=["users"],me=function(e){var n=e.users,t=(0,M.Z)(e,pe),r=ne(ue()).mutate,i=function(e){return function(n){return r({id:e,pin:n})}},a=[{title:(0,V.jsx)(U,{checked:!0,disabled:!0}),render:function(e){var n=e.id,t=e.pin;return(0,V.jsx)(U,{checked:t,onCheckedChange:i(n)})}},{title:"\u540d\u79f0",dataIndex:"name",key:"name",sorter:function(e,n){return e.name.localeCompare(n.name)},render:function(e,n){return(0,V.jsx)(P.rU,{to:String(n.id),children:e})}},{title:"\u90e8\u95e8",dataIndex:"organization",key:"organization"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"personId",key:"personId",render:function(e){var t;return(null===(t=n.find((function(n){return n.id===e})))||void 0===t?void 0:t.name)||"unknown"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created",key:"created",render:function(e){return e?_()(e).format("YYYY-MM-DD"):"\u65e0"}},{render:function(e){return(0,V.jsx)(xe,{project:e})}}];return(0,V.jsx)(F.Z,(0,O.Z)({rowKey:"id",pagination:!1,columns:a},t))},xe=function(e){var n,t=e.project,r=fe().startEdit,i=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){var t=e.id;return n("projects/".concat(t),{method:"DELETE"})}),X(e))}(ue()),a=i.mutate,o=[{label:"\u7f16\u8f91",key:"edit",onClick:(n=t.id,function(){return r(n)})},{label:"\u5220\u9664",key:"delete",onClick:function(){return function(e){N.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u9879\u76ee\u5417\uff1f",content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){a({id:e})}})}(t.id)}}];return(0,V.jsx)(S.Z,{overlay:(0,V.jsx)(D.Z,{items:o}),children:(0,V.jsx)(ie.zL,{type:"link",children:"..."})})},he=t(4941),ve=t(6005),Ze=function(e){var n=(0,A.i)();return(0,B.useQuery)(["epics",e],(function(){return n("epics",{data:e})}))},je=function(){var e=(0,A.i)();return(0,B.useQuery)(["taskTypes"],(function(){return e("taskTypes")}))},ye=t(6871),ge=function(e){var n=(0,A.i)();return(0,B.useQuery)(["kanbans",e],(function(){return n("kanbans",{data:e})}))},ke=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("kanbans/reorder",{method:"POST",data:e})}),function(e){return K(e,(function(e,n){return H((0,O.Z)({list:n},e))}))}(e))},be=function(e){var n=(0,A.i)();return(0,B.useQuery)(["tasks",e],(function(){return n("tasks",{data:e})}))},Ie=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("tasks",{method:"POST",data:e})}),$(e))},Ce=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("tasks/".concat(e.id),{method:"PATCH",data:e})}),J(e))},Ee=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("tasks/reorder",{method:"POST",data:e})}),function(e){return K(e,(function(e,n){return H((0,O.Z)({list:n},e)).map((function(n){return n.id===e.fromId?(0,O.Z)((0,O.Z)({},n),{},{kanbanId:e.toKanbanId}):n}))}))}(e))},we=function(){var e,n=null===(e=(0,ye.TH)().pathname.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(n)},Te=function(){return re(we())},Oe=function(){return{projectId:we()}},Me=function(){return["kanbans",Oe()]},Fe=function(){var e=we(),n=le(["name","typeId","processorId","tagId"]),t=(0,T.Z)(n,2),r=t[0],i=t[1];return[(0,ae.useMemo)((function(){return{projectId:e,processorId:Number(r.processorId)||void 0,typeId:Number(r.typeId)||void 0,tagId:Number(r.tagId)||void 0,name:r.name}}),[e,r]),i]},Ne=function(){return["tasks",Fe()[0]]},Se=function(){var e=le(["editingTaskId","isCreateTask","kanbanId"]),n=(0,T.Z)(e,2),t=n[0],r=n[1],i=function(e){var n=(0,A.i)();return(0,B.useQuery)(["task",e],(function(){return n("tasks/".concat(e))}),{enabled:!!e})}(Number(t.editingTaskId)),a=i.isFetching,o=i.data,c=(0,ae.useCallback)((function(e){r((0,O.Z)((0,O.Z)({},t),{},{editingTaskId:e}))}),[r,t]),s=(0,ae.useCallback)((function(e){r((0,O.Z)((0,O.Z)({},t),{},{kanbanId:e,isCreateTask:!0}))}),[r,t]),l=(0,ae.useCallback)((function(){r((0,O.Z)((0,O.Z)({},t),{},{editingTaskId:void 0,isCreateTask:void 0,kanbanId:void 0}))}),[r,t]);return{isOpen:!!t.editingTaskId||!!t.isCreateTask,editingTaskId:t.editingTaskId,kanbanId:t.kanbanId,editingTaskData:o,isFetching:a,startEdit:c,startCreate:s,close:l}},De=function(){return{projectId:we()}},ze=function(){return["epics",De()]},_e=t(7273),Pe=["value","onChange","defaultOptionName","options"],Le=function(e){var n=e.value,t=e.onChange,r=e.defaultOptionName,i=e.options,a=(0,M.Z)(e,Pe),o=_e.Z.Option;return(0,V.jsx)(_e.Z,(0,O.Z)((0,O.Z)({placeholder:r||"\u8bf7\u9009\u62e9",value:n,allowClear:!0,onChange:function(e){return null===t||void 0===t?void 0:t(Ve(e))}},a),{},{children:null===i||void 0===i?void 0:i.map((function(e){return(0,V.jsx)(o,{value:e.id,children:e.name},e.id)}))}))},Ve=function(e){return isNaN(Number(e))?void 0:Number(e)},Ge=function(e){var n=(0,A.i)();return(0,B.useQuery)(["users",e],(function(){return n("users",{data:e})}))},Ue=function(e){var n=je().data;return(0,V.jsx)(Le,(0,O.Z)({options:n},e))},Ae=function(e){var n=Ze(De()).data;return(0,V.jsx)(Le,(0,O.Z)({options:n},e))},Be=function(e){var n=Ge().data;return(0,V.jsx)(Le,(0,O.Z)({options:n},e))},Qe=t(4923),Ye=function(e){var n=e.param,t=e.setParam;return(0,Qe.BX)(he.Z,{css:{marginBottom:"2rem"},layout:"inline",children:[(0,Qe.tZ)(he.Z.Item,{children:(0,Qe.tZ)(ve.Z,{placeholder:"\u9879\u76ee\u540d\u79f0",type:"text",value:n.name,onChange:function(e){t((0,O.Z)((0,O.Z)({},n),{},{name:e.target.value}))}})}),(0,Qe.tZ)(he.Z.Item,{children:(0,Qe.tZ)(Be,{defaultOptionName:"\u8d1f\u8d23\u4eba",value:n.personId,onChange:function(e){t((0,O.Z)((0,O.Z)({},n),{},{personId:e}))}})})]})},Re=t(1313),He=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,ae.useRef)(document.title).current;(0,ae.useEffect)((function(){document.title=e}),[e]),(0,ae.useEffect)((function(){return function(){n||(document.title=t)}}),[t,n])},We=function(){var e=de(),n=(0,T.Z)(e,2),t=n[0],r=n[1],i=ee((0,Re.Nr)(t,300)),a=i.isLoading,o=i.error,c=i.data,s=Ge().data,l=void 0===s?[]:s,d=fe().open;return He("\u9879\u76ee\u5217\u8868",!1),(0,V.jsxs)(qe,{children:[(0,V.jsxs)(ie.at,{between:!0,children:[(0,V.jsx)("h2",{children:"\u9879\u76ee\u5217\u8868"}),(0,V.jsx)(ie.zL,{type:"link",onClick:d,children:"\u521b\u5efa\u9879\u76ee"})]}),(0,V.jsx)(Ye,{param:t,setParam:r}),(0,V.jsx)(ie.Tv,{error:o}),(0,V.jsx)(me,{dataSource:c||[],users:l,loading:a})]})},qe=E.Z.div(r||(r=(0,C.Z)(["\n  padding: 3.2rem\n"]))),Ke=t(6571),Xe=t(7309),Je=t(541),$e=t(5564),en=t(490),nn=t(9286),tn=t(3099),rn=t(6106),an=t(3343),on=t(2376),cn=function(e){var n=e.text,t=e.keyword;if(!t)return(0,V.jsx)(V.Fragment,{children:n});var r=n.split(t);return(0,V.jsx)(V.Fragment,{children:r.map((function(e,n){return(0,V.jsxs)("span",{children:[e,n===r.length-1?null:(0,V.jsx)(on.Z.Text,{mark:!0,children:t})]},n)}))})},sn=t(2464),ln=t(866),dn=["children"],un=["children"],fn=["children"],pn=function(e){var n=e.children,t=(0,M.Z)(e,dn);return(0,V.jsx)(ln.bK,(0,O.Z)((0,O.Z)({},t),{},{children:function(e){return ae.isValidElement(n)?ae.cloneElement(n,(0,O.Z)((0,O.Z)({},e.droppableProps),{},{ref:e.innerRef,provided:e})):(0,V.jsx)("div",{})}}))},mn=ae.forwardRef((function(e,n){var t,r=e.children,i=(0,M.Z)(e,un);return(0,V.jsxs)("div",(0,O.Z)((0,O.Z)({ref:n},i),{},{children:[r,null===(t=i.provided)||void 0===t?void 0:t.placeholder]}))})),xn=function(e){var n=e.children,t=(0,M.Z)(e,fn);return(0,V.jsx)(ln._l,(0,O.Z)((0,O.Z)({},t),{},{children:function(e){return ae.isValidElement(n)?ae.cloneElement(n,(0,O.Z)((0,O.Z)((0,O.Z)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef})):(0,V.jsx)("div",{})}}))},hn=["kanban","allTasks"],vn=ae.forwardRef((function(e,n){var t=e.kanban,r=e.allTasks,i=(0,M.Z)(e,hn),a=null===r||void 0===r?void 0:r.filter((function(e){return e.kanbanId===t.id}));return(0,V.jsxs)(In,(0,O.Z)((0,O.Z)({},i),{},{ref:n,hoverable:!0,title:t.name,size:"small",headStyle:{backgroundColor:"#1890ff",color:"#fff"},bodyStyle:{flex:1,overflowX:"scroll"},extra:(0,V.jsx)(yn,{kanban:t},t.id),children:[(0,V.jsx)(Cn,{children:(0,V.jsx)(pn,{type:"ROW",direction:"vertical",droppableId:String(t.id),children:(0,V.jsx)(mn,{style:{minHeight:"10px"},children:null===a||void 0===a?void 0:a.map((function(e,n){return(0,V.jsx)(xn,{index:n,draggableId:String(e.id),children:(0,V.jsx)("div",{children:(0,V.jsx)(jn,{task:e},e.id)})},e.id)}))})})}),(0,V.jsx)(gn,{kanbanId:t.id})]}))})),Zn=function(e){var n,t=e.id,r=je().data,i=null===r||void 0===r||null===(n=r.find((function(e){return e.id===t})))||void 0===n?void 0:n.name;if(!i)return null;var a=(0,V.jsx)($e.Z,{twoToneColor:"#eb2f96"}),o=(0,V.jsx)(en.Z,{});return"task"===i?o:a},jn=function(e){var n=e.task,t=Se().startEdit,r=Fe(),i=(0,T.Z)(r,1)[0].name,a=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){var t=e.id;return n("tasks/".concat(t),{method:"DELETE"})}),X(e))}(Ne()).mutate;return(0,V.jsxs)(En,{bodyStyle:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsx)(wn,{onClick:function(){return t(n.id)},children:(0,V.jsxs)(tn.Z,{children:[(0,V.jsx)(Zn,{id:n.typeId}),(0,V.jsx)(cn,{text:n.name,keyword:i})]})}),(0,V.jsx)(sn.Z,{onClick:function(e){e.stopPropagation(),N.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u8be5\u4efb\u52a1?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){a({id:n.id})}})}})]},n.id)},yn=function(e){var n=e.kanban,t=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){var t=e.id;return n("kanbans/".concat(t),{method:"DELETE"})}),X(e))}(Me()).mutate,r=[{label:(0,V.jsx)(Xe.Z,{type:"link",onClick:function(){N.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u8be5\u770b\u677f?",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){t({id:n.id})}})},children:"\u5220\u9664"}),key:"delete"}];return(0,V.jsx)(S.Z,{overlay:(0,V.jsx)(D.Z,{items:r}),children:(0,V.jsx)(Xe.Z,{type:"link",children:"..."})})},gn=function(e){var n=e.kanbanId,t=Se().startCreate;return(0,V.jsx)(kn,{children:(0,V.jsx)(rn.Z,{title:"\u521b\u5efa\u4efb\u52a1",children:(0,V.jsx)(bn,{type:"primary",shape:"circle",icon:(0,V.jsx)(nn.Z,{}),onClick:function(){return t(n)}})})})},kn=E.Z.div(i||(i=(0,C.Z)(["\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n"]))),bn=(0,E.Z)(Xe.Z)(a||(a=(0,C.Z)(["\n  box-shadow: 0 3px 6px -4px #0000001f, 0 6px 16px #00000014, 0 9px 28px 8px #0000000d;  \n"]))),In=(0,E.Z)(an.Z)(o||(o=(0,C.Z)(["\n  min-width: 28rem;\n  position: relative;\n  margin-right: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  border-radius: 5px;\n"]))),Cn=E.Z.div(c||(c=(0,C.Z)(["\n  flex: 1;\n  overflow: scroll;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]))),En=(0,E.Z)(an.Z)(s||(s=(0,C.Z)(["\n  margin-bottom: 0.5rem;\n  cursor: pointer;\n"]))),wn=E.Z.div(l||(l=(0,C.Z)(["\n  flex: 1;\n"]))),Tn=function(){var e=(0,ae.useState)(""),n=(0,T.Z)(e,2),t=n[0],r=n[1],i=we(),a=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("kanbans",{method:"POST",data:e})}),$(e))}(Me()).mutateAsync,o=function(){var e=(0,R.Z)((0,Y.Z)().mark((function e(){return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({name:t,projectId:i});case 2:r("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,V.jsx)(In,{children:(0,V.jsx)(ve.Z,{placeholder:"\u65b0\u5efa\u770b\u677f",size:"large",value:t,onChange:function(e){return r(e.target.value)},onPressEnter:o})})},On=function(){var e=Fe(),n=(0,T.Z)(e,2),t=n[0],r=n[1];return(0,V.jsxs)(ie.at,{marginBottom:3,gap:!0,children:[(0,V.jsx)(ve.Z,{style:{width:"20rem"},placeholder:"\u4efb\u52a1\u540d",value:t.name,onChange:function(e){return r({name:e.target.value})}}),(0,V.jsx)(Be,{defaultOptionName:"\u7ecf\u529e\u4eba",value:t.processorId,onChange:function(e){return r({processorId:e})}}),(0,V.jsx)(Ue,{defaultOptionName:"\u7c7b\u578b",value:t.typeId,onChange:function(e){return r({typeId:e})}}),(0,V.jsx)(Xe.Z,{onClick:function(){r({name:void 0,typeId:void 0,processorId:void 0,tagId:void 0})},children:"\u6e05\u9664\u7b5b\u9009\u5668"})]})},Mn=t(8139),Fn=function(){var e=Se(),n=e.editingTaskData,t=e.kanbanId,r=e.close,i=e.isOpen,a=e.isFetching,o=(0,Mn.cI)(),c=(0,T.Z)(o,1)[0],s=we(),l=!!n,d=(l?Ce:Ie)(Ne()),u=d.mutateAsync,f=d.error,p=d.isLoading,m=function(){c.resetFields(),r()},x=function(){var e=(0,R.Z)((0,Y.Z)().mark((function e(){var r,i;return(0,Y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.validateFields();case 3:return r=e.sent,i=(0,O.Z)((0,O.Z)({},n),r),l||(i=(0,O.Z)((0,O.Z)({},i),{},{kanbanId:t,projectId:s})),e.next=8,u(i);case 8:m(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Failed:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return(0,ae.useEffect)((function(){c.setFieldsValue(n)}),[n,c]),(0,V.jsxs)(N.Z,{onOk:x,onCancel:m,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:n?"\u7f16\u8f91\u4efb\u52a1":"\u65b0\u5efa\u4efb\u52a1",confirmLoading:p,visible:i,closable:!1,forceRender:!0,children:[(0,V.jsx)(Dn,{style:{display:a?"block":"none"},children:(0,V.jsx)(Sn,{size:"large"})}),(0,V.jsxs)("div",{style:{display:a?"none":"block"},children:[(0,V.jsx)(ie.Tv,{error:f}),(0,V.jsxs)(he.Z,(0,O.Z)((0,O.Z)({},Nn),{},{form:c,children:[(0,V.jsx)(he.Z.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}],label:"\u4efb\u52a1\u540d",name:"name",children:(0,V.jsx)(ve.Z,{placeholder:"\u4efb\u52a1\u540d"})}),(0,V.jsx)(he.Z.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ecf\u529e\u4eba"}],children:(0,V.jsx)(Be,{defaultOptionName:"\u7ecf\u529e\u4eba"})}),(0,V.jsx)(he.Z.Item,{label:"\u4efb\u52a1\u7ec4",name:"epicId",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4"}],children:(0,V.jsx)(Ae,{defaultOptionName:"\u4efb\u52a1\u7ec4"})}),(0,V.jsx)(he.Z.Item,{label:"\u7c7b\u578b",name:"typeId",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7c7b\u578b"}],children:(0,V.jsx)(Ue,{defaultOptionName:"\u7c7b\u578b"})})]}))]})]})},Nn={labelCol:{span:8},wrapperCol:{span:16}},Sn=(0,E.Z)(Je.Z)(d||(d=(0,C.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Dn=E.Z.div(u||(u=(0,C.Z)(["\n  width: 100%;\n  height: 100%;\n"]))),zn=function(){var e=ge(Oe()),n=e.data,t=e.isLoading,r=Fe(),i=(0,T.Z)(r,1)[0],a=be((0,Re.Nr)(i,200)),o=a.isLoading,c=a.data,s=t||o,l=Te().data,d=function(){var e=ge(Oe()).data,n=ke(Me()).mutate,t=be(Fe()[0]).data,r=void 0===t?[]:t,i=Ee(Ne()).mutate;return(0,ae.useCallback)((function(t){var a=t.source,o=t.destination,c=t.type;if(o){if("COLUMN"===c){var s=null===e||void 0===e?void 0:e[a.index].id,l=null===e||void 0===e?void 0:e[o.index].id;if(!s||!l||s===l)return;var d=o.index>a.index?"after":"before";n({fromId:s,referenceId:l,type:d})}if("ROW"===c){var u=+a.droppableId,f=+o.droppableId,p=null===r||void 0===r?void 0:r.filter((function(e){return e.kanbanId===u}))[a.index],m=null===r||void 0===r?void 0:r.filter((function(e){return e.kanbanId===f}))[o.index];if((null===p||void 0===p?void 0:p.id)===(null===m||void 0===m?void 0:m.id))return;i({fromId:null===p||void 0===p?void 0:p.id,referenceId:null===m||void 0===m?void 0:m.id,type:o.index>a.index?"after":"before",fromKanbanId:u,toKanbanId:f})}}}),[e,n,r,i])}();return He("\u770b\u677f\u5217\u8868"),(0,V.jsx)(ln.Z5,{onDragEnd:d,children:(0,V.jsxs)(ie.X_,{children:[(0,V.jsxs)("h1",{children:[null===l||void 0===l?void 0:l.name,"\u770b\u677f"]}),(0,V.jsx)(On,{}),s?(0,V.jsx)(Je.Z,{size:"large"}):(0,V.jsxs)(_n,{children:[(0,V.jsx)(pn,{type:"COLUMN",direction:"horizontal",droppableId:"kanban",children:(0,V.jsx)(mn,{style:{display:"flex"},children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,V.jsx)(xn,{draggableId:"kanban"+e.id,index:n,children:(0,V.jsx)(vn,{kanban:e,allTasks:c||[]},e.id)},e.id)}))})}),(0,V.jsx)(Tn,{})]}),(0,V.jsx)(Fn,{})]})})},_n=E.Z.div(f||(f=(0,C.Z)(["\n  display: flex;\n  flex: 1;\n  padding: 10px;\n  overflow-x: scroll;\n"]))),Pn=t(2126),Ln=t(7099),Vn=t(1333),Gn=t(8894),Un=function(e){var n=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){return n("epics",{method:"POST",data:e})}),$(e))}(ze()),t=n.mutate,r=n.isLoading,i=(0,Mn.cI)(),a=(0,T.Z)(i,1)[0],o=we(),c=function(){var n=(0,R.Z)((0,Y.Z)().mark((function n(r){return(0,Y.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t((0,O.Z)((0,O.Z)({},r),{},{projectId:o}));case 2:e.onClose();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,V.jsx)(Gn.Z,{visible:e.visible,onClose:e.onClose,forceRender:!0,destroyOnClose:!0,width:"100%",children:(0,V.jsxs)(An,{children:[(0,V.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),(0,V.jsxs)(he.Z,{form:a,layout:"vertical",style:{width:"40rem"},onFinish:c,children:[(0,V.jsx)(he.Z.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"}],children:(0,V.jsx)(ve.Z,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"})}),(0,V.jsx)(he.Z.Item,{children:(0,V.jsx)(Xe.Z,{loading:r,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})},An=E.Z.div(p||(p=(0,C.Z)(["\n  min-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center; \n"]))),Bn=function(){var e=Te().data,n=Ze(De()).data,t=be({projectId:null===e||void 0===e?void 0:e.id}).data,r=void 0===t?[]:t,i=function(e){var n=(0,A.i)();return(0,B.useMutation)((function(e){var t=e.id;return n("epics/".concat(t),{method:"DELETE"})}),X(e))}(ze()).mutate,a=(0,ae.useState)(!1),o=(0,T.Z)(a,2),c=o[0],s=o[1];return(0,V.jsxs)(ie.X_,{children:[(0,V.jsxs)(ie.at,{between:!0,children:[(0,V.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u4efb\u52a1\u7ec4"]}),(0,V.jsx)(Xe.Z,{onClick:function(){return s(!0)},children:"\u521b\u5efa\u4efb\u52a1\u7ec4"})]}),(0,V.jsx)(Pn.ZP,{style:{overflow:"scroll "},dataSource:n,itemLayout:"vertical",renderItem:function(n){return(0,V.jsxs)(Pn.ZP.Item,{children:[(0,V.jsx)(Pn.ZP.Item.Meta,{title:(0,V.jsxs)(ie.at,{between:!0,children:[(0,V.jsx)("span",{children:n.name}),(0,V.jsx)(Xe.Z,{type:"link",onClick:function(){return function(e){N.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u4efb\u52a1\u7ec4: ".concat(e.name,"?"),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){i({id:e.id})}})}(n)},children:"\u5220\u9664"})]}),description:(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",_()(n.start).format("YYYY-MM-DD")]}),(0,V.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4\uff1a",_()(n.end).format("YYYY-MM-DD")]})]})}),(0,V.jsx)(Ln.Z,{children:r.filter((function(e){return e.epicId===n.id})).map((function(n,t,r){return(0,V.jsxs)("div",{children:[(0,V.jsx)(P.rU,{to:"/projects/".concat(null===e||void 0===e?void 0:e.id,"/kanban?editingTaskId=").concat(n.id),children:n.name}),t<r.length-1?(0,V.jsx)(Vn.Z,{type:"vertical"}):null]},n.id)}))})]})}}),(0,V.jsx)(Un,{visible:c,onClose:function(){return s(!1)}})]})},Qn=[{label:(0,V.jsx)(P.rU,{to:"kanban",children:"\u770b\u677f"}),key:"kanban"},{label:(0,V.jsx)(P.rU,{to:"epic",children:"\u4efb\u52a1\u7ec4"}),key:"epic"}],Yn=function(){var e=function(){var e=(0,ye.TH)().pathname.split("/");return e[e.length-1]}();return(0,V.jsxs)(Wn,{children:[(0,V.jsx)(Rn,{children:(0,V.jsx)(D.Z,{items:Qn,mode:"inline",selectedKeys:[e]})}),(0,V.jsx)(Hn,{children:(0,V.jsxs)(ye.Z5,{children:[(0,V.jsx)(ye.AW,{path:"/kanban",element:(0,V.jsx)(zn,{})}),(0,V.jsx)(ye.AW,{path:"/epic",element:(0,V.jsx)(Bn,{})}),(0,V.jsx)(ye.AW,{path:"/",element:(0,V.jsx)(ye.Fg,{to:"kanban",replace:!0})})]})})]})},Rn=E.Z.div(m||(m=(0,C.Z)(["\n  background-color: rgba(244, 245, 247);\n  display: flex;\n"]))),Hn=E.Z.div(x||(x=(0,C.Z)(["\n  display: flex;\n  overflow: hidden;\n"]))),Wn=E.Z.div(h||(h=(0,C.Z)(["\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n  flex: 1;\n  overflow: hidden;\n"]))),qn=function(){var e=fe(),n=e.projectModelOpen,t=e.editingProjectData,r=e.close,i=e.isFetching,a=(t?ne:te)(ue()),o=a.mutateAsync,c=a.error,s=a.isLoading,l=he.Z.useForm(),d=(0,T.Z)(l,1)[0],u=function(){d.resetFields(),r()},f=t?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee";return(0,ae.useEffect)((function(){d.setFieldsValue(t)}),[t,d]),(0,V.jsx)(Gn.Z,{visible:n,width:"100%",onClose:u,forceRender:!0,children:(0,V.jsx)(Kn,{children:i?(0,V.jsx)(Je.Z,{size:"large"}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h1",{children:f}),(0,V.jsx)(ie.Tv,{error:c}),(0,V.jsxs)(he.Z,{form:d,layout:"vertical",style:{width:"40rem"},onFinish:function(e){o((0,O.Z)((0,O.Z)({},t),e)).then(u)},children:[(0,V.jsx)(he.Z.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"}],children:(0,V.jsx)(ve.Z,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),(0,V.jsx)(he.Z.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"}],children:(0,V.jsx)(ve.Z,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"})}),(0,V.jsx)(he.Z.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:(0,V.jsx)(Be,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),(0,V.jsx)(he.Z.Item,{children:(0,V.jsx)(Xe.Z,{loading:s,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},Kn=E.Z.div(v||(v=(0,C.Z)(["\n  min-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),Xn=t(3020),Jn=function(){var e=ee({}),n=e.data,t=(e.refetch,fe().open),r=null===n||void 0===n?void 0:n.filter((function(e){return e.pin})),i=(0,V.jsxs)($n,{children:[(0,V.jsx)(on.Z.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),(0,V.jsx)(Pn.ZP,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,V.jsx)(Pn.ZP.Item,{children:(0,V.jsx)(Pn.ZP.Item.Meta,{title:e.name})},e.id)}))}),(0,V.jsx)(Vn.Z,{}),(0,V.jsx)(ie.zL,{type:"link",onClick:t,children:"\u521b\u5efa\u9879\u76ee"})]});return(0,V.jsx)(Xn.Z,{placement:"bottom",content:i,children:(0,V.jsx)("h3",{style:{cursor:"pointer"},children:"\u9879\u76ee"})})},$n=E.Z.div(Z||(Z=(0,C.Z)(["\n  min-width: 30rem;\n"]))),et=function(){var e=Ge(),n=e.data,t=e.refetch,r=(0,V.jsxs)(nt,{children:[(0,V.jsx)(on.Z.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),(0,V.jsx)(Pn.ZP,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,V.jsx)(Pn.ZP.Item,{children:(0,V.jsx)(Pn.ZP.Item.Meta,{title:e.name})},e.id)}))})]});return(0,V.jsx)(Xn.Z,{onVisibleChange:function(e){e&&t()},placement:"bottom",content:r,children:(0,V.jsx)("h3",{style:{cursor:"pointer"},children:"\u7ec4\u5458"})})},nt=E.Z.div(j||(j=(0,C.Z)(["\n  min-width: 30rem;\n"]))),tt=t(7962);function rt(){return(0,V.jsx)(at,{children:(0,V.jsxs)(P.VK,{children:[(0,V.jsx)(it,{}),(0,V.jsx)(lt,{children:(0,V.jsxs)(ye.Z5,{children:[(0,V.jsx)(ye.AW,{path:"/projects",element:(0,V.jsx)(We,{})}),(0,V.jsx)(ye.AW,{path:"/projects/:projectId/*",element:(0,V.jsx)(Yn,{})}),(0,V.jsx)(ye.AW,{path:"/",element:(0,V.jsx)(ye.Fg,{to:"/projects",replace:!0})})]})}),(0,V.jsx)(qn,{})]})})}var it=function(){var e=(0,w.a)(),n=e.logout,t=e.user,r=[{label:"\u767b\u51fa",key:"logout",icon:(0,V.jsx)(tt.Z,{}),onClick:function(){return n()}}];return(0,V.jsxs)(ot,{between:!0,children:[(0,V.jsxs)(ct,{gap:!0,children:[(0,V.jsx)(ie.zL,{type:"link",onClick:ce,children:(0,V.jsx)(Ke.r,{width:"15rem",color:"rgb(30, 132, 255)"})}),(0,V.jsx)(Jn,{}),(0,V.jsx)(et,{})]}),(0,V.jsx)(st,{children:(0,V.jsx)(S.Z,{overlay:(0,V.jsx)(D.Z,{items:r}),children:(0,V.jsxs)(Xe.Z,{type:"link",onClick:function(e){return e.preventDefault()},children:["Hi, ",null===t||void 0===t?void 0:t.name]})})})]})},at=E.Z.div(y||(y=(0,C.Z)(["\n  display: grid;\n  grid-template-rows: 6rem 1fr;\n  height: 100vh;\n"]))),ot=(0,E.Z)(ie.at)(g||(g=(0,C.Z)(["\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n"]))),ct=(0,E.Z)(ie.at)(k||(k=(0,C.Z)([""]))),st=E.Z.div(b||(b=(0,C.Z)([""]))),lt=E.Z.main(I||(I=(0,C.Z)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n"])))}}]);
//# sourceMappingURL=238.3d6eb921.chunk.js.map